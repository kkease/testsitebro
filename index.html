<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>Cohere Chat Script Generator</title>
<style>
  body { font-family: Arial, sans-serif; max-width: 600px; margin: 2rem auto; padding: 1rem; background: #f9f9f9; }
  input, button, textarea { width: 100%; padding: 0.5rem; margin: 0.5rem 0; font-size: 1rem; }
  textarea { height: 200px; }
  #loading { display: none; font-style: italic; }
</style>
</head>
<body>

<h1>Cohere Chat Script Generator</h1>

<label for="prompt">Enter your prompt:</label>
<input type="text" id="prompt" placeholder="Type something to generate script..." />

<button id="generateBtn">Generate</button>

<p id="loading">Generatingâ€¦ please wait.</p>

<label for="output">Generated Script:</label>
<textarea id="output" readonly></textarea>

<script>
  const generateBtn = document.getElementById('generateBtn');
  const loadingEl = document.getElementById('loading');
  const outputEl = document.getElementById('output');

  async function generateTextChat(prompt) {
    console.log('Sending prompt:', JSON.stringify(prompt)); // Debug log

    const response = await fetch('https://api.cohere.ai/chat', {
      method: 'POST',
      headers: {
        'Authorization': 'Bearer WIafTKAXHizalcw5KLG4E5Jro8Nx36f0nZuYh5rn',
        'Content-Type': 'application/json',
        'Cohere-Version': '2022-12-06'
      },
      body: JSON.stringify({
        model: 'command-xlarge-nightly',
        messages: [
          { role: 'user', content: prompt }
        ],
        max_tokens: 150,
        temperature: 0.7
      })
    });

    if (!response.ok) {
      const error = await response.json();
      throw new Error(error.message || 'Failed to generate text');
    }

    const data = await response.json();
    return data.choices[0].message.content.trim();
  }

  generateBtn.addEventListener('click', async () => {
    const prompt = document.getElementById('prompt').value.trim();

    if (!prompt) {
      alert('Please enter a prompt!');
      return;
    }

    loadingEl.style.display = 'block';
    outputEl.value = '';

    try {
      const result = await generateTextChat(prompt);
      outputEl.value = result;
    } catch (e) {
      outputEl.value = 'Error: ' + e.message;
    } finally {
      loadingEl.style.display = 'none';
    }
  });
</script>

</body>
</html>
